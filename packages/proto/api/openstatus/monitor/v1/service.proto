syntax = "proto3";

package openstatus.monitor.v1;

import "openstatus/monitor/v1/dns_monitor.proto";
import "openstatus/monitor/v1/http_monitor.proto";
import "openstatus/monitor/v1/tcp_monitor.proto";


option go_package = "github.com/openstatushq/openstatus/packages/proto/openstatus/monitor/v1;monitorv1";

// MonitorService provides CRUD and operational commands for monitors.
service MonitorService {
  // CreateHTTPMonitor creates a new HTTP monitor.
  rpc CreateHTTPMonitor(CreateHTTPMonitorRequest) returns (CreateHTTPMonitorResponse);

  // CreateTCPMonitor creates a new TCP monitor.
  rpc CreateTCPMonitor(CreateTCPMonitorRequest) returns (CreateTCPMonitorResponse);

  // CreateDNSMonitor creates a new DNS monitor.
  rpc CreateDNSMonitor(CreateDNSMonitorRequest) returns (CreateDNSMonitorResponse);

  // TriggerMonitor initiates an immediate check for a monitor.
  rpc TriggerMonitor(TriggerMonitorRequest) returns (TriggerMonitorResponse);

  // DeleteMonitor removes a monitor.
  rpc DeleteMonitor(DeleteMonitorRequest) returns (DeleteMonitorResponse);

  // ListMonitors returns a list of monitors.
  rpc ListMonitors(ListMonitorsRequest) returns (ListMonitorsResponse);
}

// CreateHTTPMonitorRequest is the request to create a new HTTP monitor.
message CreateHTTPMonitorRequest {
  HTTPMonitor monitor = 1;
}

// CreateHTTPMonitorResponse is the response after creating an HTTP monitor.
message CreateHTTPMonitorResponse {
  HTTPMonitor monitor = 1;
}

// CreateTCPMonitorRequest is the request to create a new TCP monitor.
message CreateTCPMonitorRequest {
  TCPMonitor monitor = 1;
}

// CreateTCPMonitorResponse is the response after creating a TCP monitor.
message CreateTCPMonitorResponse {
  TCPMonitor monitor = 1;
}

// CreateDNSMonitorRequest is the request to create a new DNS monitor.
message CreateDNSMonitorRequest {
  DNSMonitor monitor = 1;
}

// CreateDNSMonitorResponse is the response after creating a DNS monitor.
message CreateDNSMonitorResponse {
  DNSMonitor monitor = 1;
}

// TriggerMonitorRequest is the request to trigger a monitor check.
message TriggerMonitorRequest {
  string id = 1;
}

// TriggerMonitorResponse is the response after triggering a monitor.
message TriggerMonitorResponse {
  bool success = 1;
}

// DeleteMonitorRequest is the request to delete a monitor.
message DeleteMonitorRequest {
  string id = 1;
}

// DeleteMonitorResponse is the response after deleting a monitor.
message DeleteMonitorResponse {
  bool success = 1;
}

// ListMonitorsRequest is the request to list monitors.
message ListMonitorsRequest {
  optional int32 page_size = 1;
  optional string page_token = 2;
}

// ListMonitorsResponse is the response containing a list of monitors.
message ListMonitorsResponse {
  repeated HTTPMonitor http_monitors = 1;
  repeated TCPMonitor tcp_monitors = 2;
  repeated DNSMonitor dns_monitors = 3;
  string next_page_token = 4;
}
