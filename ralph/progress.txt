## Completed Tasks

### Task 1: Redirect user with no access for status-pages/[id]
- **PRD Item**: "When a user is on wrong dashboard /status-pages/[id] redirect him to /status-pages"
- **Status**: COMPLETED
- **Commit**: b72b1bf5
- **Changes Made**:
  - Modified `apps/dashboard/src/app/(dashboard)/status-pages/[id]/layout.tsx`
  - Changed from `prefetchQuery` to `fetchQuery` to properly check page access
  - Added try-catch block to handle errors when user doesn't have access to the page
  - Redirects to `/status-pages` instead of throwing an error when:
    - Page doesn't exist
    - User doesn't have access to the page (wrong workspace)

### Task 2: Database Schema - Add unsubscribedAt timestamp field
- **PRD Item**: "Add unsubscribedAt timestamp field to page_subscribers table"
- **Status**: COMPLETED
- **Changes Made**:
  - Modified `packages/db/src/schema/page_subscribers/page_subscribers.ts`:
    - Added `unsubscribedAt: integer("unsubscribed_at", { mode: "timestamp" })` field
  - Created migration file `packages/db/drizzle/0053_groovy_doctor_strange.sql`:
    - SQL: `ALTER TABLE page_subscriber ADD unsubscribed_at integer;`
  - Updated `packages/db/drizzle/meta/_journal.json` with new migration entry
  - Created snapshot file `packages/db/drizzle/meta/0053_snapshot.json` with updated schema

### Task 3: API - Unsubscribe Mutation
- **PRD Item**: "Create public unsubscribe mutation in statusPage router"
- **Status**: COMPLETED
- **Changes Made**:
  - Modified `packages/api/src/router/statusPage.ts`:
    - Added `unsubscribe` publicProcedure mutation
    - Accepts input: `z.object({ token: z.string().uuid() })`
    - Finds subscriber by token with page relation
    - Validates token exists and subscriber has `acceptedAt` set (verified)
    - Validates subscriber is not already unsubscribed
    - Sets `unsubscribedAt` to current timestamp
    - Returns success response with page title
