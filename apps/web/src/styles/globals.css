@import 'tailwindcss';

@plugin 'tailwindcss-animate';
@plugin '@tailwindcss/container-queries';
@plugin '@tailwindcss/typography';

@source '../../../../packages/ui/**/*.{ts,tsx}';
@source '../../../../packages/tracker/**/*.{ts,tsx}';
@source '../../node_modules/@openstatus/react/**/*.{js,ts,jsx,tsx}';

@custom-variant dark (&:is(.dark *));

@theme {
  --background-image-gradient-radial: radial-gradient(var(--tw-gradient-stops));

  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));

  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));

  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));

  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));

  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));

  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));

  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));

  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));

  --color-status-operational: hsl(var(--status-operational));

  --color-status-degraded: hsl(var(--status-degraded));

  --color-status-down: hsl(var(--status-down));

  --color-status-monitoring: hsl(var(--status-monitoring));

  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  --font-sans:
    var(--font-sans), ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji',
    'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  --font-cal: var(--font-calsans);

  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;

  @keyframes accordion-down {
    from {
      height: 0;
    }
    to {
      height: var(--radix-accordion-content-height);
    }
  }
  @keyframes accordion-up {
    from {
      height: var(--radix-accordion-content-height);
    }
    to {
      height: 0;
    }
  }
}

@utility container {
  margin-inline: auto;
  padding-inline: 2rem;
  @media (width >= --theme(--breakpoint-sm)) {
    max-width: none;
  }
  @media (width >= 1400px) {
    max-width: 1400px;
  }
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;

    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;

    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;

    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;

    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;

    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;

    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;

    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    --ring: 215 20.2% 65.1%;

    --radius: 0.5rem;

    /** Chart Colors */
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;

    /* Status Tracker Colors - Radix Color */
    --status-degraded: 50 100% 52%; /* Amber 10 */
    --status-operational: 131 39% 51%; /* Grass 10 */
    --status-down: 11 82% 59%; /* Tomato 10 */
    --status-monitoring: 210 100% 62%; /* Blue 10 */

    --sh-class: #2d5e9d;
    --sh-identifier: #354150;
    --sh-sign: #8996a3;
    --sh-string: #007f7a;
    --sh-keyword: #e02518;
    --sh-comment: #a19595;
    --sh-jsxliterals: #6266d1;
    --sh-property: #e25a1c;
    --sh-entity: #e25a1c;

    --color-success: var(--status-operational);
    --color-warning: var(--status-degraded);
    --color-info: var(--status-monitoring);

    --color-sh-class: var(--sh-class);
    --color-sh-identifier: var(--sh-identifier);
    --color-sh-sign: var(--sh-sign);
    --color-sh-string: var(--sh-string);
    --color-sh-keyword: var(--sh-keyword);
    --color-sh-comment: var(--sh-comment);
    --color-sh-jsxliterals: var(--sh-jsxliterals);
    --color-sh-property: var(--sh-property);
    --color-sh-entity: var(--sh-entity);
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;

    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;

    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;

    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;

    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;

    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;

    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;

    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 85.7% 97.3%;

    --ring: 217.2 32.6% 17.5%;

    /* Chart Colors */
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;

    /* Status Tracker Colors - Radix Color */
    --status-degraded: 50 100% 52%; /* Amber 10 */
    --status-operational: 131 39% 51%; /* Grass 10 */
    --status-down: 11 82% 59%; /* Tomato 10 */
    --status-monitoring: 210 100% 62%; /* Blue 10 */

    --sh-class: #4c97f8;
    --sh-identifier: white;
    --sh-keyword: #f47067;
    --sh-string: #0fa295;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }

  [data-highlighted-chars] {
    @apply bg-muted rounded;
  }
  
  [data-highlighted-line] {
    @apply bg-muted rounded;
  }

  [data-rehype-pretty-code-caption] {
    @apply mt-1 text-muted-foreground text-xs;
  }

  [data-rehype-pretty-code-title] {
    @apply mb-1 text-muted-foreground text-xs font-mono;
  }

  .dark [data-theme='dark'] {
    display: block;
  }
  
  [data-theme='dark'] {
    display: none;
  }
  
  [data-theme='light'] {
    display: block;
  }
  
  .dark [data-theme='light'] {
    display: none;
  }
}

/* Typography */

::selection {
  background-color: var(--primary);
  color: var(--primary-foreground);
}

.prose {
  @apply text-foreground/80;
}

.prose .anchor {
  @apply absolute invisible no-underline;

  margin-left: -1em;
  padding-right: 0.5em;
  width: 80%;
  max-width: 700px;
  cursor: pointer;
}

.anchor:hover {
  @apply visible;
}

.prose a {
  @apply text-foreground underline transition-all decoration-muted-foreground/50 underline-offset-2 decoration-2 hover:decoration-muted-foreground;
}

.prose .anchor:after {
  @apply text-muted-foreground;
  content: '#';
}

.prose *:hover > .anchor {
  @apply visible;
}

.prose pre {
  @apply relative bg-muted overflow-x-auto border border-border py-2.5 px-3.5 text-sm;
}

.prose code {
  @apply px-1 py-0.5 bg-muted;
}

.prose pre code {
  @apply p-0;
  border: initial;
  line-height: 1.5;
}

.prose code span {
  @apply font-medium;
}

.prose img {
  /* Don't apply styles to next/image */
  @apply m-0;
}

.prose p {
  @apply my-4 leading-7;
}

.prose h1 {
  @apply text-3xl text-foreground font-medium tracking-tight my-4 relative;
}


.prose h2 {
  @apply text-2xl text-foreground font-medium tracking-tight my-4 relative;
}

.prose h3 {
  @apply text-xl text-foreground font-medium tracking-tight my-4 relative;
}

.prose h4 {
  @apply text-lg text-foreground font-medium tracking-tight my-4 relative;
}

.prose hr {
  @apply my-4 border-border;
}

.prose strong {
  @apply text-foreground font-semibold;
}

.prose blockquote {
  @apply border-l-2 border-foreground/50 pl-4;
}

.prose blockquote p::before {
  content: '"';
  @apply text-muted-foreground;
}

.prose blockquote p::after {
  content: '"';
  @apply text-muted-foreground;
}

.prose figure {
  @apply my-4;
}

.prose figure img {
  @apply aspect-video object-cover border border-border;
}

.prose figure figcaption {
  @apply text-sm text-muted-foreground not-empty:mt-1;
}

.prose em {
  @apply text-foreground italic;
}

.prose ul {
  list-style-type: "- ";
  @apply pl-4 list-outside marker:text-muted-foreground;
}

.prose ol {
  /* NOTE: maybe replace by default pl and list-inside */
  @apply pl-4 list-outside list-decimal marker:text-muted-foreground;
}

.prose li {
  @apply leading-7;
}

.prose details {
  @apply border border-border p-4 my-4;
}

.prose details p:last-child {
  @apply mb-0;
}

.prose details summary {
  @apply cursor-pointer font-medium text-foreground select-none;
}

.prose details summary:hover {
  @apply bg-muted;
}

.prose details summary::marker {
  @apply mr-1;
}

.prose details[open] summary {
  @apply mb-2;
}

.prose form {
  @apply my-4;
}

.prose form label {
  @apply text-foreground font-medium;
}

/* Wrapper for scrollable tables */
.prose .table-wrapper {
  @apply w-full overflow-x-auto my-4;
}

.prose table {
  @apply w-full border-collapse border border-border text-foreground;
}

.prose table th {
  @apply font-medium bg-muted/50 p-4 text-left border border-border;
}

.prose table td {
  @apply font-normal p-4 border border-border;
}

.prose table caption {
  @apply text-muted-foreground text-sm caption-bottom mt-4;
}

pre::-webkit-scrollbar {
  display: none;
}

pre {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}

/* Remove Safari input shadow on mobile */
input[type='text'],
input[type='email'] {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

.title {
  text-wrap: balance;
}